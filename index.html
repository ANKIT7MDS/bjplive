<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <title>рднрд╛рдЬрдкрд╛ рдХрд╛рд░реНрдпрд╛рд▓рдп рдлреЙрд░реНрдо</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #ff6f00; /* рдбрд╛рд░реНрдХ рдСрд░реЗрдВрдЬ */
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 30px 10px;
    }

    form {
      background: #ffa726;
      padding: 25px 30px;
      border-radius: 10px;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }

    h2, h3 {
      text-align: center;
      color: #ffffff;
      margin: 5px 0;
    }

    label {
      color: #ffffff;
      font-weight: bold;
      margin-top: 10px;
      display: block;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: none;
      border-radius: 6px;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
      font-size: 16px;
    }

    button {
      background-color: #ffffff;
      color: #e65100;
      padding: 12px;
      margin-top: 15px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
    }

    button:hover {
      background-color: #ffcc80;
    }

    #camera-container {
      text-align: center;
      margin-top: 15px;
    }

    #camera-stream, #selfiePreview {
      width: 100%;
      max-width: 220px;
      border-radius: 8px;
      margin: 10px;
      border: 2px solid #fff;
    }

    .success {
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
      color: green;
    }

    canvas {
      display: none;
    }
  </style>
</head>
<body>

  <form id="myForm" method="POST" action="https://script.google.com/macros/s/AKfycbxZhcfU-fSRpFCgvqhAVUiSUJNquaaZNEY-3DbPF_d3dDQisATFcGLH5_kbN-iebqB0/exec">
    <h2>рднрд╛рдЬрдкрд╛ рдХрд╛рд░реНрдпрд╛рд▓рдп рдкрд░ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ</h2>
    <h3>ЁЯУЛ рдЖрдЧрдВрддреБрдХ рдкрдВрдЬреАрдпрди</h3>

    <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
    <input type="text" name="рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░" required />

    <label>рдирд╛рдо:</label>
    <input type="text" name="рдирд╛рдо" required />

    <label>рдкрдж:</label>
    <input type="text" name="рдкрдж" />

    <label>рдордВрдбрд▓:</label>
    <select name="рдордВрдбрд▓" required>
      <option value="">рдордВрдбрд▓ рдЪреБрдиреЗрдВ</option>
      <option>рднреЗрдВрд╕реЛрджрд╛</option><option>рднрд╛рдирдкреБрд░рд╛</option><option>рдЧрд░реЛрда</option>
      <option>рдореЗрд▓рдЦреЗрдбрд╛</option><option>рдЦреЬрд╛рд╡рджрд╛</option><option>рд╢рд╛рдордЧреЭ</option>
      <option>рд╕реБрд╡рд╛рд╕рд░рд╛</option><option>рдмрд╕рд╛рдИ</option><option>рд╕реАрддрд╛рдордК</option>
      <option>рдХреНрдпрд╛рдордкреБрд░</option><option>рд╕реАрддрд╛рдордК рдЧреНрд░рд╛рдореАрдг</option><option>рдЧреБрд░реНрдЬрд░ рдмрд░рдбрд┐рдпрд╛</option>
      <option>рдзреБрдВрджрдзреЬрдХрд╛</option><option>рдмреБрдврд╛</option><option>рдкрд┐рдкрд▓рд┐рдпрд╛ рдордВрдбреА</option>
      <option>рдорд▓реНрд╣рд╛рд░рдЧреЭ</option><option>рджрд▓реЛрджрд╛</option><option>рдордЧрд░рд╛рдорд╛рддрд╛ рдЬреА</option>
      <option>рдордВрджрд╕реМрд░ рдЧреНрд░рд╛рдореАрдг</option><option>рдордВрджрд╕реМрд░ рдЙрддреНрддрд░</option>
      <option>рдордВрджрд╕реМрд░ рджрдХреНрд╖рд┐рдг</option><option>рдЕрдиреНрдп рдЬрд┐рд▓реЗ рд╕реЗ рдЖрдпреЗ</option>
    </select>

    <label>рдмреВрде / рд╡рд╛рд░реНрдб / рдкрддрд╛:</label>
    <input type="text" name="рдмреВрде / рд╡рд╛рд░реНрдб / рдкрддрд╛" />

    <label>рдЖрдиреЗ рдХрд╛ рдХрд╛рд░рдг:</label>
    <select name="purpose" required>
      <option value="">рдЖрдиреЗ рдХрд╛ рдХрд╛рд░рдг рдЪреБрдиреЗрдВ</option>
      <option>рдХрд╛рд░реНрдпрд╛рд▓рдп рдкрд░ рдмреИрдардХ рдореЗрдВ</option>
      <option>рдорд╛рдирдиреАрдп рдЬрд┐рд▓рд╛ рдЕрдзреНрдпрдХреНрд╖ рдЬреА рд╕реЗ рдХрд┐рд╕реА рдХрд╛рд░реНрдп рд╣реЗрддреБ рднреЗрдВрдЯ</option>
      <option>рдЯреНрд░рд╛рдВрд╕рдлрд░ рдпрд╛ рдЕрдиреНрдп рдХреЛрдИ рд╢рд╛рд╕рдХреАрдп рдХрд╛рд░реНрдп / рд╢рд┐рдХрд╛рдпрдд</option>
      <option>рдХрд╛рд░реНрдпрд╛рд▓рдп рдкрд░ рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрд╕реНрдерд┐рддрд┐</option>
      <option>рдЕрдиреНрдп рдХреЛрдИ рдХрд╛рд░реНрдп</option>
    </select>

    <input type="hidden" name="Selfie" id="selfieInput" />

    <div id="camera-container">
      <video id="camera-stream" autoplay></video><br>
      <button type="button" id="capture">ЁЯУ╕ рдлреЛрдЯреЛ рдХреИрдкреНрдЪрд░ рдХрд░реЗрдВ</button><br>
      <img id="selfiePreview" />
    </div>

    <canvas id="canvas" width="300" height="220"></canvas>

    <div id="statusMessage" class="success"></div>

    <button type="submit">тЬЕ рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ</button>
  </form>

<script>
  const video = document.getElementById('camera-stream');
  const canvas = document.getElementById('canvas');
  const selfieInput = document.getElementById('selfieInput');
  const captureBtn = document.getElementById('capture');
  const preview = document.getElementById('selfiePreview');
  const statusMsg = document.getElementById('statusMessage');
  const form = document.getElementById('myForm');

  // тЬЕ рдХреИрдорд░рд╛ рд╕реНрдЯрд╛рд░реНрдЯ рдХрд░рдирд╛
  window.addEventListener("load", () => {
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
        video.srcObject = stream;
      }).catch(err => {
        console.error("рдХреИрдорд░рд╛ рдПрд░рд░:", err);
        alert("ЁЯУ╕ рдХреИрдорд░рд╛ рдЪрд╛рд▓реВ рдирд╣реАрдВ рд╣реЛ рдкрд╛рдпрд╛! рдХреГрдкрдпрд╛ рдЕрдиреБрдорддрд┐ рджреЗрдВ рдпрд╛ HTTPS рд╕реЗ рдЦреЛрд▓реЗрдВред");
      });
    } else {
      alert("тЭМ рдХреИрдорд░рд╛ рдЖрдкрдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рд╣реИред");
    }
  });

  // тЬЕ рдлреЛрдЯреЛ рдХреИрдкреНрдЪрд░ рдХрд░рдирд╛
  captureBtn.addEventListener('click', () => {
    const context = canvas.getContext('2d');
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    const imageData = canvas.toDataURL('image/png');
    selfieInput.value = imageData;
    preview.src = imageData;
    preview.style.display = 'inline';
    statusMsg.textContent = "тЬЕ рдлреЛрдЯреЛ рдХреИрдкреНрдЪрд░ рд╣реЛ рдЧрдпрд╛ рд╣реИред";
  });

  // тЬЕ Form рд╕рдмрдорд┐рдЯ рдХреЛ рд░реЛрдХрдХрд░ AJAX рд╕реЗ рднреЗрдЬрдирд╛
  form.addEventListener('submit', function(e) {
    e.preventDefault(); // ЁЯЪл default redirect рд░реЛрдХреЗ

    if (!selfieInput.value) {
      alert("ЁЯУ╕ рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рдлреЛрдЯреЛ рдХреИрдкреНрдЪрд░ рдХрд░реЗрдВ");
      return;
    }

    statusMsg.textContent = "ЁЯЪА рдбреЗрдЯрд╛ рд╕рдмрдорд┐рдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...";

    const formData = new FormData(form);

    fetch(form.action, {
      method: "POST",
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      if (data.result === "success") {
        statusMsg.textContent = "ЁЯОЙ рдзрдиреНрдпрд╡рд╛рдж! рдЖрдкрдХрд╛ рдлреЙрд░реНрдо рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕рдмрдорд┐рдЯ рд╣реБрдЖред";
        form.reset();
        selfieInput.value = "";
        preview.src = "";
        setTimeout(() => {
          statusMsg.textContent = "";
        }, 4000);
      } else {
        statusMsg.textContent = "тЭМ рддреНрд░реБрдЯрд┐ рд╣реБрдИ! рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред";
      }
    })
    .catch(err => {
      console.error("Error:", err);
      statusMsg.textContent = "тЭМ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдорд╕реНрдпрд╛! рд╕рдмрдорд┐рдЯ рдирд╣реАрдВ рд╣реЛ рдкрд╛рдпрд╛ред";
    });
  });
</script>



</body>
</html>
